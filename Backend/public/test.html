<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é›†æˆæµ‹è¯•</title>
    <link rel="stylesheet" href="/css/navigation.css">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            padding: 20px; 
        }
        
        body.has-nav {
            padding-top: 90px;
        }
        .test-result { margin: 10px 0; padding: 10px; border-radius: 5px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
    </style>
</head>
<body class="has-nav">
    <div id="navigation"></div>
    <h1>ğŸ§ª åŒ»ç–—é—®è¯ŠåŠ©æ‰‹é›†æˆæµ‹è¯•</h1>
    
    <div id="test-results"></div>
    
    <script>
        const results = document.getElementById('test-results');
        
        function addResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.textContent = message;
            results.appendChild(div);
        }
        
        async function runTests() {
            addResult('å¼€å§‹è¿è¡Œé›†æˆæµ‹è¯•...', 'info');
            
            // æµ‹è¯•1: APIå¥åº·æ£€æŸ¥
            try {
                const response = await fetch('/api/health');
                const data = await response.json();
                if (response.ok) {
                    addResult('âœ… APIå¥åº·æ£€æŸ¥: é€šè¿‡', 'success');
                } else {
                    addResult('âŒ APIå¥åº·æ£€æŸ¥: å¤±è´¥', 'error');
                }
            } catch (error) {
                addResult(`âŒ APIå¥åº·æ£€æŸ¥: é”™è¯¯ - ${error.message}`, 'error');
            }
            
            // æµ‹è¯•2: é¡µé¢è·¯ç”±
            const routes = [
                { path: '/', name: 'ä¸»é¡µå¯¼èˆª' },
                { path: '/web', name: 'å®Œæ•´é—®è¯Šè¡¨å•' },
                { path: '/demo', name: 'APIæ¼”ç¤ºé¡µé¢' }
            ];
            
            for (const route of routes) {
                try {
                    const response = await fetch(route.path);
                    if (response.ok) {
                        addResult(`âœ… è·¯ç”±æµ‹è¯• ${route.path} (${route.name}): é€šè¿‡`, 'success');
                    } else {
                        addResult(`âŒ è·¯ç”±æµ‹è¯• ${route.path}: HTTP ${response.status}`, 'error');
                    }
                } catch (error) {
                    addResult(`âŒ è·¯ç”±æµ‹è¯• ${route.path}: é”™è¯¯ - ${error.message}`, 'error');
                }
            }
            
            // æµ‹è¯•3: é™æ€æ–‡ä»¶
            const staticFiles = [
                '/js/medical-api.js'
            ];
            
            for (const file of staticFiles) {
                try {
                    const response = await fetch(file);
                    if (response.ok) {
                        addResult(`âœ… é™æ€æ–‡ä»¶ ${file}: é€šè¿‡`, 'success');
                    } else {
                        addResult(`âŒ é™æ€æ–‡ä»¶ ${file}: HTTP ${response.status}`, 'error');
                    }
                } catch (error) {
                    addResult(`âŒ é™æ€æ–‡ä»¶ ${file}: é”™è¯¯ - ${error.message}`, 'error');
                }
            }
            
            // æµ‹è¯•4: APIæ¥å£
            const apiEndpoints = [
                { method: 'GET', path: '/api/patients', name: 'è·å–æ‚£è€…åˆ—è¡¨' }
            ];
            
            for (const endpoint of apiEndpoints) {
                try {
                    const response = await fetch(endpoint.path, { method: endpoint.method });
                    if (response.ok || response.status === 500) { // 500å¯èƒ½æ˜¯æ•°æ®åº“æœªè¿æ¥
                        addResult(`âœ… APIæ¥å£ ${endpoint.method} ${endpoint.path}: é€šè¿‡`, 'success');
                    } else {
                        addResult(`âŒ APIæ¥å£ ${endpoint.path}: HTTP ${response.status}`, 'error');
                    }
                } catch (error) {
                    addResult(`âŒ APIæ¥å£ ${endpoint.path}: é”™è¯¯ - ${error.message}`, 'error');
                }
            }
            
            addResult('ğŸ‰ é›†æˆæµ‹è¯•å®Œæˆï¼', 'info');
        }
        
        // é¡µé¢åŠ è½½åè¿è¡Œæµ‹è¯•
        document.addEventListener('DOMContentLoaded', runTests);
    </script>
    <script src="/js/navigation.js"></script>
</body>
</html>
